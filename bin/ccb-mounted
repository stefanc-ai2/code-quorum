#!/usr/bin/env python3
from __future__ import annotations

"""
Compatibility wrapper: `ccb-mounted` has been rebranded to `cq-mounted`.

This wrapper forwards execution to `cq-mounted` while preserving importability
for tests that load the legacy `ccb-mounted` script as a module.
"""

import importlib.util
import sys
from importlib.machinery import SourceFileLoader
from pathlib import Path
from types import ModuleType


def _load_cq_mounted_module() -> ModuleType:
    cq_mounted_path = Path(__file__).resolve().parent / "cq-mounted"
    loader = SourceFileLoader("cq_mounted", str(cq_mounted_path))
    spec = importlib.util.spec_from_loader("cq_mounted", loader)
    assert spec and spec.loader
    module = importlib.util.module_from_spec(spec)
    spec.loader.exec_module(module)  # type: ignore[union-attr]
    return module


_cq_mounted = _load_cq_mounted_module()

# Re-export for backward compatibility in tests.
for _name in dir(_cq_mounted):
    if _name.startswith("__"):
        continue
    globals()[_name] = getattr(_cq_mounted, _name)


if __name__ == "__main__":
    sys.exit(_cq_mounted.main())

